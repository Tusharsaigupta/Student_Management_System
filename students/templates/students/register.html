{% extends 'students/base.html' %}

{% block body %}
  <!-- Font Awesome CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
    body {
      background-color: #f4f6f9;
    }

    .card {
      border-radius: 12px;
    }

    .form-label {
      font-weight: 500;
      color: #333;
    }

    .form-control {
      border-radius: 8px;
    }

    .btn-primary {
      background-color: #3366ff;
      border: none;
    }

    .btn-primary:hover {
      background-color: #254eda;
    }

    .text-danger {
      font-size: 0.875rem;
    }

    .password-wrapper {
      position: relative;
    }

    .toggle-password {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      cursor: pointer;
      color: #666;
      font-size: 1rem;
    }

    .toggle-password:focus {
      outline: none;
    }
  </style>

  <div class="container d-flex justify-content-center align-items-center min-vh-100">
    <div class="card p-4 shadow-lg w-100" style="max-width: 480px;">
      <h2 class="text-center mb-4">Create Your Account</h2>

      <form method="post" novalidate>
        {% csrf_token %}

        {% for field in form %}
          <div class="mb-3">
            <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }}</label>

            {% if field.field.widget.input_type == "password" %}
              <div class="password-wrapper">
                {{ field }}
                <button type="button" class="toggle-password" onclick="togglePasswordVisibility(this)">
                  <i class="fa-solid fa-eye"></i>
                </button>
              </div>
            {% else %}
              {{ field }}
            {% endif %}

            {% if field.errors %}
              <div class="text-danger">{{ field.errors|striptags }}</div>
            {% endif %}
          </div>
        {% endfor %}

        <button type="submit" class="btn btn-primary w-100">Register</button>
      </form>
    </div>
  </div>

  <script>
    function togglePasswordVisibility(button) {
      const input = button.previousElementSibling;
      const icon = button.querySelector('i');

      if (input.type === "password") {
        input.type = "text";
        icon.classList.remove("fa-eye");
        icon.classList.add("fa-eye-slash");
      } else {
        input.type = "password";
        icon.classList.remove("fa-eye-slash");
        icon.classList.add("fa-eye");
      }
    }
  </script>
{% endblock %}
